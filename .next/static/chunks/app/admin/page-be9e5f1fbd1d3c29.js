(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{7108:(e,s,t)=>{Promise.resolve().then(t.bind(t,7308))},7308:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(5155),l=t(2115),r=t(3464),i=t(6766);let d={src:"/_next/static/media/Nothing.3eb6d825.png",height:1024,width:1024,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAP1BMVEX///+zpSX+8RD99j/07+37+/WbmKD09PT45MPp6ejExs2gi4FCQ2RaU2v44dDDr6SJezRLTm1APl6ZizPJvrU62YJ7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPUlEQVR4nCXLSRKAMAzEQCWxMzZb2P7/Vgq46NQCwN8gmVKOmUdIxhat1hYBYy/lmh2mYz2X/um7579lCh4ulwFts7UCOwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8};var n=t(5494),c=t(6821),g=t(8627),o=t(6089),h=t(2608);let m=()=>{let{loggedIn:e}=(0,l.useContext)(h.R),[s,t]=(0,l.useState)([]),{showNotification:m}=(0,o.h)();(0,l.useEffect)(()=>{console.log("Messages useEffect - loggedIn:",e),e&&(console.log("Fetching messages..."),r.A.get("/api/admin/messages",{withCredentials:!0}).then(e=>{console.log("Messages fetched:",e.data),t(e.data)}).catch(e=>{console.error("Error fetching messages:",e),m("error","Unauthorized: Please login")}))},[e,m]);let A=async e=>{try{await r.A.delete("/api/admin/messages?id=".concat(e),{withCredentials:!0}),t(s.filter(s=>s._id!==e)),m("success","Message deleted successfully",3e3)}catch(e){m("error","Failed to delete message")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{}),(0,a.jsx)(g.A,{}),(0,a.jsxs)("div",{className:"min-h-screen w-full flex flex-col items-center justify-start bg-white py-20",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-2 text-gray-800",children:"Messages"}),(0,a.jsx)("div",{className:"w-40 h-[1px] bg-indigo-600 mx-auto mb-6"}),s.length>0?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"w-full p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4",children:s.map(e=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-md shadow-md border border-gray-300",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.email}),(0,a.jsx)("p",{className:"mt-5 text-gray-600",children:e.message}),(0,a.jsx)("p",{className:"mt-5 text-gray-400 text-sm",children:new Date(e.createdAt).toLocaleString()}),(0,a.jsx)("button",{onClick:()=>A(e._id),className:"mt-4 w-full bg-red-500 text-white py-2 rounded-md hover:bg-red-600",children:"Delete"})]},e._id))})}):(0,a.jsx)("div",{className:"",children:(0,a.jsx)(i.default,{priority:!0,width:500,src:d,alt:"Profile photo",className:"pointer-events-none select-none"})})]}),(0,a.jsx)(c.A,{})]})};function A(){return(0,a.jsx)(o.p,{children:(0,a.jsx)(m,{})})}function x(){return(0,a.jsx)(h.S,{children:(0,a.jsx)(o.p,{children:(0,a.jsx)(A,{})})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[266,592,596,308,441,684,358],()=>s(7108)),_N_E=e.O()}]);